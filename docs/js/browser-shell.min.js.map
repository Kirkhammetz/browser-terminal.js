{"version":3,"sources":["node_modules/browser-pack/_prelude.js","bin/browser-shell.js","bin/classes/Command.js","bin/classes/File.js","bin/classes/Filesystem.js","bin/classes/Interpreter.js","bin/classes/Shell.js","bin/configs/builtin-commands.js","bin/configs/default-filesystem.js","package.json"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","global","Command","_ref","arguments","undefined","name","fn","_ref$type","type","_ref$shell","shell","_ref$man","man","_classCallCheck","this","bind","args","Array","isArray","File","_ref$name","_ref$content","content","uid","genUid","user","group","permission","s4","Math","floor","random","toString","substring","DEFAULT_FS","Filesystem","fs","_typeof","JSON","parse","stringify","FileSystem","initFs","cwd","buildVirtualFs","obj","key","hasOwnProperty","path","match","pathArray","split","shift","pop","concat","output","join","replace","slice","node","fileWalker","cb","traverseFiles","traverseDirs","fileType","pathStringToArray","result","getNode","err","cwdAsString","pathArrayToString","Interpreter","cmd","parsed","message","command","ShellCommands","filter","exec","format","ShellReference","customCommands","Blueprints","Object","keys","map","Shell","_ref$filesystem","filesystem","_ref$commands","commands","_ref$user","_ref$hostname","hostname","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","registerCommands","_extends","defineProperty","prototype","writable","enumerable","version","description","repository","author","license","help","whoami","about","str","cd","changeDir","ls","list","responseString","listDir","file","cat","readFile","file.h","etc","apache2","apache2.conf","home","guest","docs","mydoc.md","mydoc2.md","mydoc3.md","root",".zshrc",".oh-my-zsh","themes","main","scripts","test","build","build:dev","build:prod","keywords","devDependencies","babelify","browserify","chalk","gulp","gulp-rename","gulp-sourcemaps","gulp-uglify","gulp-util","uglify-js","utils-merge","vinyl-buffer","vinyl-source-stream","watchify","dependencies","babel","babel-core","babel-polyfill","babel-preset-es2015","babel-preset-stage-3","chai","mocha"],"mappings":"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","file":"browser-shell.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Shell Only\n * @type {Class}\n * Init the shell with command and filesystem\n * @method execute() exposed to query the Shell with commands\n */\nglobal['Shell'] = require('./classes/Shell')\n","/**\n * Command Class\n * @param name [String], fn [Function]\n *\n * don't pass arrow function if you want to use this inside your command function to access various shared shell object\n */\nclass Command {\n  constructor({ name, fn, type = 'usr', shell = undefined, man = ''} = {}){\n    if (typeof name !== 'string') throw Error('Command name must be a string')\n    if (typeof fn !== 'function') throw Error('Command function must be... a function')\n\n    /**\n     * use whole function instead of arrow if you want to access\n     * circular reference of Command\n     */\n    this.fn = fn.bind(this)\n    this.name = name\n    this.type = type\n    this.man = man\n\n    if (shell) {\n      this.shell = shell\n    }\n  }\n\n  /**\n   * Dispatch Command Execution\n   *\n   * @tip don't use arrow function in you command if you want the arguments\n   * neither super and arguments get binded in AF.\n   */\n  exec(args = []) {\n    if (!Array.isArray(args)) throw Error('Command exec args must be in an array')\n    if (args.length) return this.fn(args)\n    return this.fn()\n  }\n}\n\nmodule.exports = Command\n","/**\n * @class Single File Class\n * Simulate file properties\n */\nclass File {\n  constructor({ name = '', type = 'file', content = ''} = {}) {\n    this.uid = this.genUid()\n    this.name = name\n    this.type = type\n    this.content = content\n    this.user = 'root'\n    this.group = 'root'\n\n    if (this.type === 'file') {\n      this.permission = 'rwxr--r--'\n    } else {\n      this.permission = 'drwxr-xr-x'\n    }\n\n  }\n\n  genUid() {\n    function s4() {\n      return Math.floor((1 + Math.random()) * 0x10000)\n        .toString(16)\n        .substring(1);\n    }\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n      s4() + '-' + s4() + s4() + s4();\n  }\n}\n\nmodule.exports = File\n","const DEFAULT_FS = require('../configs/default-filesystem')\nconst File = require('./File')\n\n/**\n * @class Virtual Filesystem\n * Represented as an object of nodes\n */\nclass Filesystem {\n  constructor(fs = DEFAULT_FS, shell = {}) {\n    this.shell = shell\n    if (typeof fs !== 'object' || Array.isArray(fs)) throw new Error('Virtual Filesystem provided not valid, initialization failed.')\n\n    // Not By Reference.\n    // HACK: Object assign refuse to work as intended.\n    fs = JSON.parse(JSON.stringify(fs))\n    this.FileSystem = this.initFs(fs)\n\n    // CWD for commands usage\n    this.cwd = ['/']\n  }\n\n  /**\n   * Init & Pass Control to recurrsive function\n   * @return new Filesystem as nodes of multiple @class File\n   */\n  initFs(fs) {\n    this.buildVirtualFs(fs)\n    return fs\n  }\n\n  /**\n   * Traverse all node and build a virtual representation of a filesystem\n   * Each node is a File instance.\n   * @param Mocked Filesystem as Object\n   *\n   */\n  buildVirtualFs(obj) {\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (typeof obj[key] === 'object' && !Array.isArray(obj[key])) {\n          obj[key] = new File({ name: key, content: obj[key], type: 'dir' })\n          this.buildVirtualFs(obj[key].content)\n        } else {\n          obj[key] = new File({ name: key, content: obj[key] })\n        }\n      }\n    }\n  }\n\n  /**\n   * Get a stringed path and return as array\n   * throw error if path format is invalid\n   * Relative Path gets converted using Current Working Directory\n   * @param path {String}\n   * @return Array\n   */\n  pathStringToArray(path = '') {\n    if (!path.length) throw new Error('Path cannot be empty')\n\n    // Check for invalid path, eg. two+ // in a row\n    if (path.match(/\\/{2,}/g)) throw new Error(`-invalid path: ${path}`)\n\n    // Format and Composer array\n    let pathArray = path.split('/')\n    if (pathArray[0] === '') pathArray[0] = '/'\n    if (pathArray[0] === '.') pathArray.shift()\n    if(pathArray[pathArray.length - 1] === '') pathArray.pop()\n    // handle relative path with current working directory\n    if (pathArray[0] !== '/') {\n      pathArray = this.cwd.concat(pathArray)\n    }\n    return pathArray\n  }\n\n  /**\n   * Path from array to String\n   * For presentational purpose.\n   * TODO\n   * @param path [Array]\n   * @return {String}\n   */\n  pathArrayToString(path = []) {\n    if (!Array.isArray(path)) throw new Error('-fatal filesystem: path must be an array')\n    if (!path.length) throw new Error('-invalid filesystem: path not provided')\n    let output = path.join('/')\n    // remove / multiple occurrence\n    return output.replace(/\\/{2,}/g, '/')\n  }\n\n  /**\n   * Luke.. fileWalker\n   * Accepts only Absolute Path, you must convert paths before calling using pathStringToArray\n   * @param cb executed on each file found\n   * @param fs [Shell Virtual Filesystem]\n   */\n  fileWalker(path = ['/'], fs = this.FileSystem){\n    if (!Array.isArray(path)) throw new Error('Path must be an array of nodes, use Filesystem.pathStringToArray({string})')\n\n    // avoid modifying external path reference\n    path = path.slice(0)\n\n    // TODO:\n    //  Choose:\n    //    - Go full pure\n    //    - Work on the reference of the actual node\n    // fs = Object.assign(fs, {})\n\n    // Exit Condition\n    if (!path.length) return fs\n\n    // Get current node\n    let node = path.shift()\n\n    // Go deeper if it's not the root dir\n    if (node !== '/') {\n      // check if node exist\n      if (fs[node]) {\n        // return file or folder\n        fs = fs[node].type === 'dir' ? fs[node].content : fs[node]\n      } else {\n        throw new Error('File doesn\\'t exist')\n      }\n    }\n    return this.fileWalker(path, fs)\n  }\n\n  /**\n   * traverseFiles\n   * accessing all file at least once\n   * calling provided callback on each\n   * @param cb executed on each file found\n   * @param fs [Shell Virtual Filesystem]\n   */\n  traverseFiles(cb = ()=>{}, fs = this.FileSystem){\n    const self = this.traverseFiles\n    for (let node in fs) {\n      if (fs.hasOwnProperty(node)) {\n        if (fs[node].type === 'dir') this.traverseFiles(cb, fs[node].content)\n        else cb(fs[node])\n      }\n    }\n  }\n\n  /**\n   * traverseDirs\n   * accessing all directory at least once\n   * calling provided callback on each\n   * @param cb executed on each file found\n   * @param fs [Shell Virtual Filesystem]\n   */\n  traverseDirs(cb = ()=>{}, fs = this.FileSystem){\n    for (let node in fs) {\n      if (fs.hasOwnProperty(node)) {\n        if (fs[node].type === 'dir') {\n          cb(fs[node])\n          this.traverseDirs(cb, fs[node].content)\n        }\n      }\n    }\n  }\n\n  /**\n   * Get Directory Node\n   * Passed as Reference or Instance,\n   * depend by a line in @method fileWalker, see comment there.\n   * @return Directory Node Object\n   */\n  getNode(path = '', fileType) {\n    if (typeof path !== 'string') throw new Error('Invalid input.')\n    let pathArray, node\n\n    try {\n      pathArray = this.pathStringToArray(path)\n      node = this.fileWalker(pathArray)\n    } catch (e) {\n      throw e\n    }\n\n    /**\n     * ERROR HANDLING\n     */\n\n    // Handle List on a file\n    if (fileType === 'dir' && node.type === 'file') {\n      throw new Error('Its a file not a directory')\n    }\n    // Handle readfile on a dir\n    if (fileType === 'file' && node.type === 'dir') {\n      throw new Error('Its a directory not a file')\n    }\n    // handle readfile on non existing file\n    if (fileType === 'file' && !node.type) {\n      throw new Error('Invalid file path')\n    }\n    // handle invalid / nonexisting path\n    if (!node) {\n      throw new Error('Invalid path, file/folder doesn\\'t exist')\n    }\n\n    return { path, pathArray , node }\n  }\n\n  /**\n   * Change Current Working Directory Gracefully\n   * @return Message String.\n   */\n  changeDir(path = '') {\n    let result\n    try {\n      result = this.getNode(path, 'dir')\n    } catch (err) {\n      throw err\n    }\n    this.cwd = result.pathArray\n    return `changed directory.`\n  }\n\n  /**\n   * List Current Working Directory Files\n   * @return {}\n   */\n  listDir(path = '') {\n    let result\n    try {\n      result = this.getNode(path, 'dir')\n    } catch (err) {\n      throw err\n    }\n    return result.node\n  }\n\n  readFile(path = '') {\n    let result\n    try {\n      result = this.getNode(path, 'file')\n    } catch (err) {\n      throw err\n    }\n    return result.node\n  }\n\n  getCurrentDirectory() {\n    let cwdAsString\n    try {\n      cwdAsString = this.pathArrayToString(this.cwd)\n    } catch (e) {\n      return '-invalid filesystem: An error occured while parsing current working directory to string.'\n    }\n    return cwdAsString\n  }\n\n}\n\nmodule.exports = Filesystem\n","const Command = require('./Command')\n\n/**\n *\n * Interpreter\n * Is the parent Class of the Main Shell Class\n * - This class is the one that parse and run exec of command\n * - Parsing of builtin command on runtime happen here\n * - Will parse custom user Command too\n *\n */\nclass Interpreter {\n\n  /**\n   * Parse Command\n   * @return Array of args as in C\n   */\n  parse(cmd) {\n    if (typeof cmd !== 'string') throw new Error('Command must be a string')\n    if (!cmd.length) throw new Error('Command is empty')\n    return cmd.split(' ')\n  }\n\n  /**\n   * Format Output\n   * return error if function is returned\n   * convert everything else to json.\n   * @return JSON parsed\n   */\n  format(output) {\n    if (typeof output === 'function') {\n      return '-invalid command: Command returned invalid data type.'\n    }\n    if (output === undefined || typeof output === 'undefined') {\n      return '-invalid command: Command returned no data.'\n    }\n    return output\n    // try {\n    //   return JSON.stringify(output)\n    // } catch (e) {\n    //   return '-invalid command: Command returned invalid data type: ' + e.message\n    // }\n  }\n\n  /**\n   * Exec Command\n   * @return JSON String with output\n   */\n  exec(cmd) {\n\n    //  Parse Command String: [0] = command name, [1+] = arguments\n    let parsed\n    try {\n      parsed = this.parse(cmd)\n    } catch (e) {\n      return '-fatal command: ' + e.message || 'Some Error Occured'\n    }\n\n    //  X-check if command exist\n    const command = this.ShellCommands[parsed[0]]\n    if (!command) {\n      return `-error shell: Command ${parsed[0]} doesn't exist.\\n`\n    }\n\n    //  get arguments array and execute command return error if throw\n    const args = parsed.filter((e, i) => i > 0)\n    let output\n    try {\n      output = command.exec(args)\n    } catch (e) {\n      return '-fatal command: ' + e.message\n    }\n\n    //  Format data and Return\n    return this.format(output)\n  }\n\n  /*\n   * Generate Builtin Command List\n   */\n  registerCommands(ShellReference, customCommands = undefined) {\n    let Blueprints = require('../configs/builtin-commands')\n    /**\n     * If custom commands are passed check for valid type\n     * If good to go generate those commands\n     */\n    if (customCommands) {\n      if (typeof customCommands === 'object' && !Array.isArray(customCommands)) {\n        Blueprints = customCommands\n      } else {\n        throw new Error('Custom command provided are not in a valid format.')\n      }\n    }\n\n    const ShellCommands = {}\n    Object.keys(Blueprints).map((key) => {\n      const cmd = Blueprints[key]\n      if (typeof cmd.name === 'string' && typeof cmd.fn === 'function') {\n        cmd.shell = ShellReference\n        ShellCommands[key] = new Command(cmd)\n      }\n    })\n    return ShellCommands\n  }\n}\n\nmodule.exports = Interpreter\n","const Interpreter = require('./Interpreter')\nconst Filesystem = require('./Filesystem')\n\n/**\n * Shell Class inherits from Interpreter\n * Options:\n *  - filesystem {Object}\n *  - commands {Object}\n *  - user {String}\n *  - hostname {String}\n */\nclass Shell extends Interpreter{\n  constructor({ filesystem = undefined, commands = undefined, user = 'root', hostname = 'my.host.me' } = {}) {\n    super()\n    /**\n     * Create the virtual filesystem\n     * @return reference to instance of @class Filesystem\n     */\n    this.fs = new Filesystem(filesystem, this)\n    this.user = user\n    this.hostname = hostname\n\n    // Init builtin commands, @method in parent\n    // pass shell reference\n    this.ShellCommands = this.registerCommands(this)\n    this.ShellCommands = {\n      ...this.ShellCommands,\n      ...this.registerCommands(this, commands),\n    }\n  }\n\n  /**\n   * Pass control to Interpreter\n   * @return output as [String]\n   */\n  run(cmd) {\n    return this.exec(cmd)\n  }\n}\n\nObject.defineProperty(Shell.prototype, 'fs', { writable: true, enumerable: false })\nObject.defineProperty(Shell.prototype, 'ShellCommands', { writable: true, enumerable: false })\n\nmodule.exports = Shell\n","const { name, version, description, repository, author, license } = require('../../package.json')\nmodule.exports = {\n\n  /**\n   * Help\n   * @return List of commands\n   */\n  help: {\n    name: 'help',\n    type: 'builtin',\n    man: 'List of avaible commands',\n    fn: function() {\n      return `Commands avaible: ${Object.keys(this.shell.ShellCommands).join(', ')}`\n    }\n  },\n\n  whoami: {\n    name: 'whoami',\n    type: 'builtin',\n    man: 'Current user',\n    fn: function() {\n      return this.shell.user\n    },\n  },\n\n  about: {\n    name: 'about',\n    type: 'builtin',\n    man: 'About this project',\n    fn: function() {\n      let str = ''\n      str += `name: ${name}\\n`\n      str += `version: ${version}\\n`\n      str += `description: ${description}\\n`\n      str += `repository: ${repository}\\n`\n      str += `author: ${author}\\n`\n      str += `license: ${license}\\n`\n      return str\n    }\n  },\n\n  /**\n   * Return passed arguments, for testing purposes\n   */\n  arguments: {\n    name: 'arguments',\n    type: 'builtin',\n    man: 'Return argument passed, used for testing purpose',\n    fn: args => args\n  },\n\n  /**\n   * Change Directory\n   * @return Success/Fail Message String\n   */\n  cd: {\n    name: 'cd',\n    type: 'builtin',\n    man: 'Change directory, pass absolute or relative path: eg. cd /etc, cd / cd/my/nested/dir',\n    fn: function(path) {\n      if (!path) throw new Error('-invalid No path provided.')\n      path = path.join()\n      try{\n        return this.shell.fs.changeDir(path)\n      } catch(e) {\n        throw e\n      }\n    }\n  },\n\n  /**\n   * ls Command\n   * List directory files\n   * @param array of args\n   * @return formatted String\n   */\n  ls: {\n    name: 'ls',\n    type: 'builtin',\n    man: 'list directory files, pass absolute/relative path, if empty list current directory',\n    fn: function(path = ['./'] ) {\n      path = path.join()\n      let list, responseString = ''\n      try{\n        list = this.shell.fs.listDir(path)\n      } catch(e) {\n        throw e\n      }\n      for (let file in list) {\n        if (list.hasOwnProperty(file)) {\n          responseString += `${list[file].permission}\\t${list[file].user} ${list[file].group}\\t${list[file].name}\\n`\n        }\n      }\n      return responseString\n    }\n  },\n\n  /**\n   * CAT Command\n   * Read File\n   * @return formatted String\n   */\n  cat: {\n    name: 'cat',\n    type: 'builtin',\n    man: 'Return file content, take one argument: file path (relative/absolute)',\n    fn: function(path = ['./']) {\n      path = path.join()\n      let file, responseString = ''\n      try{\n        file = this.shell.fs.readFile(path)\n      } catch(e) {\n        throw e\n      }\n      return file.content\n    }\n  },\n\n  /**\n   * Man\n   * Return command manual info\n   * @return {string}\n   */\n  man: {\n    name: 'man',\n    type: 'builtin',\n    man: 'Command manual, takes one argument, command name',\n    fn: function(args) {\n      if (!args || !args[0]) throw new Error('man: no command provided.')\n      let command = args[0]\n      if (!this.shell.ShellCommands[command]) throw new Error('command doesn\\'t exist.')\n      if (!this.shell.ShellCommands[command].man) throw new Error('no manual entry for this command.')\n      return this.shell.ShellCommands[command].man\n    },\n  },\n}\n","module.exports = {\n\n  'file.h': '#include <nope.h>',\n\n  etc: {\n    apache2: {\n      'apache2.conf': 'Not What you were looking for :)',\n    },\n  },\n\n  home: {\n    guest: {\n      docs: {\n        'mydoc.md': 'TestFile',\n        'mydoc2.md': 'TestFile2',\n        'mydoc3.md': 'TestFile3',\n      },\n    },\n  },\n\n  root:{\n    '.zshrc': 'not even close :)',\n    '.oh-my-zsh': {\n      themes: {},\n    },\n  },\n}\n","module.exports={\n  \"name\": \"browser-terminal.js\",\n  \"version\": \"2.0.0\",\n  \"description\": \"Simple Browser Terminal in pure js, usable for web presentation of CLI tools and whatever you want it to do!\",\n  \"main\": \"terminal.js\",\n  \"scripts\": {\n    \"test\": \"mocha --compilers babel-core/register tests/\",\n    \"build\": \"npm run build:dev && npm run build:prod\",\n    \"build:dev\": \"gulp\",\n    \"build:prod\": \"gulp production\"\n  },\n  \"keywords\": [\n    \"terminal\",\n    \"javascript\",\n    \"simulator\",\n    \"browser\",\n    \"presentation\",\n    \"mockup\",\n    \"commands\",\n    \"fake\"\n  ],\n  \"repository\": \"https://github.com/Kirkhammetz/browser-terminal.js\",\n  \"author\": \"Simone Corsi\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"babelify\": \"^7.3.0\",\n    \"browserify\": \"^13.3.0\",\n    \"chalk\": \"^1.1.3\",\n    \"gulp\": \"^3.9.1\",\n    \"gulp-rename\": \"^1.2.2\",\n    \"gulp-sourcemaps\": \"^2.4.0\",\n    \"gulp-uglify\": \"^2.0.0\",\n    \"gulp-util\": \"^3.0.8\",\n    \"uglify-js\": \"^2.6.4\",\n    \"utils-merge\": \"^1.0.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\",\n    \"watchify\": \"^3.8.0\"\n  },\n  \"dependencies\": {\n    \"babel\": \"^6.5.2\",\n    \"babel-core\": \"^6.21.0\",\n    \"babel-polyfill\": \"^6.22.0\",\n    \"babel-preset-es2015\": \"^6.18.0\",\n    \"babel-preset-stage-3\": \"^6.17.0\",\n    \"babelify\": \"^7.3.0\",\n    \"chai\": \"^3.5.0\",\n    \"mocha\": \"^3.2.0\"\n  }\n}\n"]}